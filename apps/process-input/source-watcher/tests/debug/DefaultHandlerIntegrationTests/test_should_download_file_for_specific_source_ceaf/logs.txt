{"levelname": "INFO", "filename": "main.py", "message": "Service name: source-watcher"}
{"levelname": "INFO", "filename": "main.py", "message": "Args: Namespace(enable_debug_storage=True, debug_storage_dir='/app/tests/debug/DefaultHandlerIntegrationTests/test_should_download_file_for_specific_source_ceaf')"}
{"levelname": "INFO", "filename": "main.py", "message": "Environment variables loaded: environ({'HOSTNAME': '8aeda067c82b', 'PYTHON_PIP_VERSION': '23.0.1', 'HOME': '/root', 'ENVIRONMENT': 'test', 'GPG_KEY': 'A035C8C19219BA821ECEA86B64E628F8D684696D', 'PYTHON_GET_PIP_URL': 'https://github.com/pypa/get-pip/raw/0d8570dc44796f4369b652222cf176b3db6ac70e/public/get-pip.py', 'PATH': '/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', 'LANG': 'C.UTF-8', 'PYTHON_VERSION': '3.10.12', 'PYTHON_SETUPTOOLS_VERSION': '65.5.1', 'PWD': '/app', 'PYTHON_GET_PIP_SHA256': '96461deced5c2a487ddc65207ec5a9cffeca0d34e7af7ea1afc470ff0d746207', 'SERVICE_NAME': 'source-watcher', 'CONTEXT_ENV': 'br', 'GATEWAY_ENVIRONMENT': 'true', 'RABBITMQ_PORT_6572_TCP': 'tcp://guest:guest@gateway_host:5672', 'RABBITMQ_GATEWAY_HOST': 'rabbitmq', 'CONFIG_HANDLER_PORT_8000_TCP': 'tcp://gateway_host:8000', 'CONFIG_HANDLER_GATEWAY_HOST': 'config-handler', 'SCHEMA_HANDLER_PORT_8000_TCP': 'tcp://gateway_host:8000', 'SCHEMA_HANDLER_GATEWAY_HOST': 'schema-handler', 'JOBS_HANDLER_PORT_8000_TCP': 'tcp://gateway_host:8000', 'JOBS_HANDLER_GATEWAY_HOST': 'jobs-handler', 'MINIO_PORT_9000_TCP': 'gateway_host:9000', 'MINIO_GATEWAY_HOST': 'minio', 'MINIO_ACCESS_KEY': 'minio-root-user', 'MINIO_SECRET_KEY': 'minio-root-password', 'MONGODB_PORT_27017_TCP': 'tcp://gateway_host:27017', 'MONGODB_GATEWAY_HOST': 'mongodb', 'DEBUG_STORAGE_ENABLED': 'True', 'DEBUG_STORAGE_DIR': '/app/tests/debug/DefaultHandlerIntegrationTests/test_should_download_file_for_specific_source_ceaf'})"}
{"levelname": "INFO", "filename": "debug.py", "message": "Creating debug enabled storage at: /app/tests/debug/DefaultHandlerIntegrationTests/test_should_download_file_for_specific_source_ceaf"}
{"levelname": "INFO", "filename": "main.py", "message": "Creating consumer for config: source-watcher-ceaf"}
{"levelname": "INFO", "filename": "base.py", "message": "Published message to exchange 'services' with routing key 'input-processing'"}
{"levelname": "INFO", "filename": "job_handler.py", "message": "[RUNNING JOB] - Config ID: source-watcher-ceaf - handler: default"}
{"levelname": "INFO", "filename": "job.py", "message": "Job triggered with input: {'__test__': 'DefaultHandlerIntegrationTests.test_should_download_file_for_specific_source_ceaf', 'reference': {'day': 28, 'month': 1, 'year': 2024}}"}
/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py:1099: InsecureRequestWarning: Unverified HTTPS request is being made to host 'portaldatransparencia.gov.br'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#tls-warnings
  warnings.warn(
{"levelname": "INFO", "filename": "debug.py", "message": "Writing file 1-file-source.html to /app/tests/debug/DefaultHandlerIntegrationTests/test_should_download_file_for_specific_source_ceaf/responses/"}
{"levelname": "INFO", "filename": "job.py", "message": "File storage uri: http://minio:9000/process-input-br-source-ceaf/20240131/ceaf.html"}
{"levelname": "INFO", "filename": "job.py", "message": "Job result: {'documentUri': 'http://minio:9000/process-input-br-source-ceaf/20240131/ceaf.html', 'partition': '20240131'}"}
{"levelname": "INFO", "filename": "controller.py", "message": "sleeping for 5 seconds..."}
{"levelname": "INFO", "filename": "controller.py", "message": "Output: {\"data\": {\"result\": {\"documentUri\": \"http://minio:9000/process-input-br-source-ceaf/20240131/ceaf.html\", \"partition\": \"20240131\"}}, \"metadata\": {\"context\": \"br\", \"input\": {\"data\": {\"__test__\": \"DefaultHandlerIntegrationTests.test_should_download_file_for_specific_source_ceaf\", \"reference\": {\"day\": 28, \"month\": 1, \"year\": 2024}}, \"id\": \"0223062a01e5485d9335522b00c990c4\", \"input_schema_id\": \"44be769f-56fa-5a37-b0aa-9e219b2a61e0\", \"processing_id\": \"9d36440868f746139da74cd203be7104\", \"processing_timestamp\": \"2024-02-01T02:07:57.500010\"}, \"job_frequency\": \"daily\", \"processing_timestamp\": \"2024-02-01T02:08:00Z\", \"service\": \"source-watcher\", \"source\": \"ceaf\"}, \"status\": {\"code\": 200, \"detail\": \"OK\"}}"}
{"levelname": "INFO", "filename": "base.py", "message": "Published message to exchange 'services' with routing key 'feedback'"}
{"levelname": "INFO", "filename": "controller.py", "message": "Published message to service"}
{"levelname": "INFO", "filename": "base.py", "message": "Published message to exchange 'services' with routing key 'input-processing'"}
